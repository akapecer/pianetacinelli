<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>
    Animation | Pianeta Cinelli
  </title>
  <meta name="author" content="Pietro giuliano" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.css" />
  <link rel="stylesheet" href="../../css/styles.css" />
  <link rel="stylesheet" href="../../css/nav.css" />
  <link rel="stylesheet" href="../../css/project.css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>

<body>
  <div class="logo">
    <div class="logo-wrapper">
      <a href="../../index.html">Pietro<br />Giuliano</a>
    </div>
  </div>
  <!-- toggle btn -->
  <div class="btn" id="toggle-btn">
    <div class="btn-outline btn-outline-1"></div>
    <div class="btn-outline btn-outline-2"></div>
    <div id="hamburger">
      <span></span>
    </div>
  </div>

  <!-- svg overlay -->
  <div class="overlay">
    <svg viewBox="0 0 350 1000">
      <path d="M0 2S175 1 500 1s500 1 500 1V0H0Z"></path>
    </svg>
  </div>

  <!-- menu items -->
  <div class="menu">
    <div class="primary-menu">
      <div class="menu-container">
        <div class="wrapper">
          <div class="menu-item">
            <a href="../../index.html"><span>I</span>Index</a>
            <div class="menu-item-revealer"></div>
          </div>

          <div class="menu-item">
            <a href="../work.html"><span>II</span>Work</a>
            <div class="menu-item-revealer"></div>
          </div>

          <div class="menu-item">
            <a href="../about.html"><span>III</span>About</a>
            <div class="menu-item-revealer"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="secondary-menu">
      <div class="menu-container">
        <div class="wrapper">
          <div class="menu-item">
          

          <div class="menu-item">
            <a href="../contact.html">Contact</a>
            <div class="menu-item-revealer"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  <div class="wrapper" data-scroll-container>
    <div class="container">
      <div class="site-content">
        <section class="project-hero" data-scroll-section>
          <div class="project-header">
            <div class="row">
              <h1 class="outline">Piero</h1>
              <div class="h1-img h1-img-1"></div>
            </div>
            <div class="row">
              <div class="h1-img h1-img-2"></div>
              <h1>Cinelli</h1>
            </div>
            <div class="row">
              <h1 class="outline">Showroom</h1>
            </div>
            <div class="row">
              <h1 class="primary">
                <div class="hr"></div>
                ANIMATIONS
                <div class="hr"></div>
              </h1>
            </div>
          </div>
        </section>
      </div>
    </div>

    <section class="project-slider" data-scroll-section>
      <div class="carousel">
        <div class="carousel--wrap">
          <div class="carousel--item">
            <figure>
              <video controls loop>
                <source src="../../assets/portraits/Vid-3.mp4" type="video/mp4">
              </video>
            </figure>
          </div>

          <div class="carousel--item">
            <figure>
              <video controls loop>
                <source src="../../assets/portraits/vid-2.mp4" type="video/mp4">
              </video>
            </figure>
          </div>

          <div class="carousel--item">
            <figure>
              <video controls loop>
                <source src="../../assets/portraits/Vid-1.mp4" type="video/mp4">
              </video>
            </figure>
          </div>
          
          <div class="carousel--item">
            <figure>
              <video controls loop>
                <source src="../../assets/portraits/Vid-4.mp4" type="video/mp4">
              </video>
            </figure>
          </div>

          <div class="carousel--item">
            <figure>
              <video controls loop>
                <source src="../../assets/portraits/Vid-5.mp4" type="video/mp4">
              </video>
            </figure>
          </div>

          <div class="carousel--item">
            <figure>
              <video controls loop>
                <source src="../../assets/portraits/Vid-6.mp4" type="video/mp4">
              </video>
            </figure>
          </div>

          <div class="carousel--item">
            <figure>
              <video controls loop>
                <source src="../../assets/portraits/Vid-7.mp4" type="video/mp4">
              </video>
            </figure>
          </div>

          <div class="carousel--item">
            <figure>
              <video controls loop>
                <source src="../../assets/portraits/Vid-8.mp4" type="video/mp4">
              </video>
            </figure>
          </div>

          <div class="carousel--item">
            <figure>
              <video controls loop>
                <source src="../../assets/portraits/Vid-9.mp4" type="video/mp4">
              </video>
            </figure>
          </div>

          </div>
        </div>
      </div>
    </section>
    <div class="container">
      <div class="site-content">
        <section class="project-showcase" data-scroll-section>
          <div class="project-showcase-img">
            <img src="../../assets/photos/img-1.jpeg" alt="" />
          </div>
        </section>
      </div>
    </div>
    <section class="project-footer" data-scroll-section>
      <div class="copyright">
        <span>Copyright Â© Pietro GIuliano</span><br />
        <span>All Rights Reserved</span>
      </div>
    </section>
  </div>
  <div id="imageModal" class="modal">
    <span class="close">&times;</span>
    <div id="modalContent" class="modal-content"></div>
  </div>
  
  <script>
    // Get the modal
    var modal = document.getElementById("imageModal");
    var modalContent = document.getElementById("modalContent"); // Get the modal content container
    var carouselItems = document.querySelectorAll(".carousel--item figure > *");
    var span = document.getElementsByClassName("close")[0];
  
    carouselItems.forEach(function(item) {
      item.onclick = function(){
        modal.style.display = "block";
        modalContent.innerHTML = ''; // Clear previous content
  
        if(item.tagName === 'IMG'){
          var img = document.createElement('img');
          img.src = item.src;
          img.classList.add('modal-image'); // Add a class for styling
          modalContent.appendChild(img);
        } else if (item.tagName === 'VIDEO'){
          var video = document.createElement('video');
          var source = document.createElement('source');
          video.controls = true;
          video.loop = true;
          source.src = item.querySelector('source').src;
          source.type = item.querySelector('source').type;
          video.appendChild(source);
          video.classList.add('modal-video'); // Add a class for styling
          modalContent.appendChild(video);
          video.play(); // Play the video
        }
      }
    });
  
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }
  
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script>
  
  
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.1/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/CSSRulePlugin.min.js"></script>
<script src="../../js/script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.min.js"></script>
<script>
  window.addEventListener("load", () => {
    const scroll = new LocomotiveScroll({
      el: document.querySelector("[data-scroll-container]"),
      smooth: true,
      multiplier: 0.75,
      scrollFromAnywhere: true,
    });
  });
  setTimeout(() => {
    scroll.update();
  }, 3000);

  const lerp = (f0, f1, t) => (1 - t) * f0 + t * f1;
  const clamp = (val, min, max) => Math.max(min, Math.min(val, max));

  class DragScroll {
    constructor(obj) {
      this.$el = document.querySelector(obj.el);
      this.$wrap = this.$el.querySelector(obj.wrap);
      this.$items = this.$el.querySelectorAll(obj.item);
      this.init();
    }

    init() {
      this.progress = 0;
      this.speed = 0;
      this.oldX = 0;
      this.x = 0;
      this.playrate = 0;
      //
      this.bindings();
      this.events();
      this.calculate();
      this.raf();
    }

    bindings() {
      [
        "events",
        "calculate",
        "raf",
        "handleWheel",
        "move",
        "raf",
        "handleTouchStart",
        "handleTouchMove",
        "handleTouchEnd",
      ].forEach((i) => {
        this[i] = this[i].bind(this);
      });
    }

    calculate() {
      this.progress = 0;
      this.wrapWidth = this.$items[0].clientWidth * this.$items.length;
      this.$wrap.style.width = `${this.wrapWidth}px`;
      this.maxScroll = this.wrapWidth - this.$el.clientWidth;
    }

    handleWheel(e) {
      this.progress += e.deltaY;
      this.move();
    }

    handleTouchStart(e) {
      e.preventDefault();
      this.dragging = true;
      this.startX = e.clientX || e.touches[0].clientX;
      this.$el.classList.add("dragging");
    }

    handleTouchMove(e) {
      if (!this.dragging) return false;
      const x = e.clientX || e.touches[0].clientX;
      this.progress += (this.startX - x) * 2.5;
      this.startX = x;
      this.move();
    }

    handleTouchEnd() {
      this.dragging = false;
      this.$el.classList.remove("dragging");
    }

    move() {
      this.progress = clamp(this.progress, 0, this.maxScroll);
    }

    events() {
      window.addEventListener("resize", this.calculate);
      window.addEventListener("wheel", this.handleWheel);
      //
      this.$el.addEventListener("touchstart", this.handleTouchStart);
      window.addEventListener("touchmove", this.handleTouchMove);
      window.addEventListener("touchend", this.handleTouchEnd);
      //
      window.addEventListener("mousedown", this.handleTouchStart);
      window.addEventListener("mousemove", this.handleTouchMove);
      window.addEventListener("mouseup", this.handleTouchEnd);
      document.body.addEventListener("mouseleave", this.handleTouchEnd);
    }

    raf() {
    // requestAnimationFrame(this.raf)
    this.x = lerp(this.x, this.progress, 0.1);
    this.playrate = this.x / this.maxScroll;
    //
    this.$wrap.style.transform = `translateX(${-this.x}px)`;
    //
    this.speed = Math.min(100, this.oldX - this.x);
    this.oldX = this.x;
    //
    this.scale = lerp(this.scale, this.speed, 0.1);
    this.$items.forEach((i) => {
      i.style.transform = `scale(${1 - Math.abs(this.speed) * 0.002})`;
      const mediaElement = i.querySelector("img, video"); // Select either img or video
      if (mediaElement) {
        mediaElement.style.transform = `scaleX(${1 + Math.abs(this.speed) * 0.004})`;
      }
    });
  }

  }

  /*--------------------
Instances
--------------------*/
  const scroll = new DragScroll({
    el: ".carousel",
    wrap: ".carousel--wrap",
    item: ".carousel--item",
  });

  /*--------------------
One raf to rule em all
--------------------*/
  const raf = () => {
    requestAnimationFrame(raf);
    scroll.raf();
  };
  raf();
</script>

</html>